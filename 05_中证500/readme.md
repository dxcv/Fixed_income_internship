# 中证500的回测

## 做了什么

其实要说的话主体功能还是和上一次的差不多大概做了的事

* 重新规划了一下结构，代码的可复用性（然而并用不到）提高了

* 数据文件和输出文件也更加规范了

* 输出的数据更多了（然后为此做到头都大了）

大概就是这些吧，具体的内容如下，然后再重构一下代码




# 内容相关

##  05-中证500 进展

### 1. 最初的策略：

1. 持有规则：当日收盘价> 20日均线*103%，而且当日收盘价<5日均线103%
2. 其他一切情况空仓
3. 永远不做空

### 2.修改的内容 

1. 使用**中证500（000905）**从2015年1月1日到当前的数据，数据来源：Wind

2. 对于均线长度的选择：
   1. 长期均线选择12到30天的偶数（为了减少计算量）
   2. 短期均线选择从2到11

3. 对于均线乘数的选择
   1. 长短期均线分别选择从0.96-1.06
   2. 由于分两次做的，乘数0.96/0.98对应的数据结果不完全，有空缺值

### 3. 结果

####  1. 固定乘数，变化长短期均线长度

对于某一种均线乘数的选择,由于涉及许多年的数据,因此使用热力图标注,例如，对于乘数均为1.03的数据,累计收益率的热力图如下图所示，每一年的累计收益率中的最大收益率和所选年限写在图片最下方

![1](C:\Users\zikep\PycharmProjects\Fixed_income_internship\05_中证500\img\累计\1.03_1.03.png)



使用当年的累计收益率除以上一年的累计收益率得到某一年的当年收益率，也以乘数都选择1.03为例

![1](C:\Users\zikep\PycharmProjects\Fixed_income_internship\05_中证500\img\分年\1.03_1.03.png)



#### 2. 不同乘数之间的比较

选定某一个乘数组合，我们使用可以得到的最大收益率，做出的热力图如下图所示（**指数收益率为5.366**）

![2](C:\Users\zikep\PycharmProjects\Fixed_income_internship\05_中证500\不同乘数累计收益率.png)

数据如下表所示（**指数收益率为5.366**）（部分数据空缺是由于分两次做的，两次步长选择不一致，所以缺少数据）

![image-20200306151158359](C:\Users\zikep\AppData\Roaming\Typora\typora-user-images\image-20200306151158359.png)

其中，对于每一个具体的均线乘数组合，对应的均线时间长度和最大收益率如下表所示

| 序号 | 长期均线乘数 | 短期均线乘数 | 长期均线长度 | 短期均线长度 | 最大收益率 |
| ---- | :----------: | :----------: | :----------: | :----------: | :--------: |
| 0    |     0.96     |     0.96     |      12      |      2       |  1.67285   |
| 1    |     0.96     |     0.98     |      26      |      2       |  2.09135   |
| 2    |     0.96     |      1       |      26      |      6       |  1.06639   |
| 3    |     0.96     |     1.02     |      26      |      3       |  1.95176   |
| 4    |     0.96     |     1.04     |      26      |      2       |  11.26269  |
| 5    |     0.98     |     0.96     |      30      |      2       |  1.54852   |
| 6    |     0.98     |     0.98     |      14      |      2       |  2.56878   |
| 7    |     0.98     |      1       |      12      |      8       |  1.63828   |
| 8    |     0.98     |     1.02     |      28      |      3       |  3.42881   |
| 9    |     0.98     |     1.04     |      14      |      2       |  16.19275  |
| 10   |     0.99     |     0.99     |      18      |      2       |  2.55772   |
| 11   |     0.99     |      1       |      14      |      5       |  1.97135   |
| 12   |     0.99     |     1.01     |      18      |      6       |  2.57876   |
| 13   |     0.99     |     1.02     |      14      |      3       |  3.77438   |
| 14   |     0.99     |     1.03     |      14      |      2       |  13.47105  |
| 15   |     0.99     |     1.04     |      18      |      2       |  22.10968  |
| 16   |     0.99     |     1.05     |      14      |      3       |  35.71629  |
| 17   |     0.99     |     1.06     |      14      |      3       |  37.36705  |
| 18   |     1.01     |     0.99     |      20      |      2       |  2.27007   |
| 19   |     1.01     |      1       |      20      |      2       |  3.28934   |
| 20   |     1.01     |     1.01     |      20      |      6       |  3.14123   |
| 21   |     1.01     |     1.02     |      20      |      2       |  5.30092   |
| 22   |     1.01     |     1.03     |      20      |      2       |  15.10063  |
| 23   |     1.01     |     1.04     |      20      |      2       |  24.41824  |
| 24   |     1.01     |     1.05     |      16      |      3       |  39.52218  |
| 25   |     1.01     |     1.06     |      16      |      3       |  39.7419   |
| 26   |     1.02     |     0.96     |      24      |      2       |  1.44464   |
| 27   |     1.02     |     0.98     |      22      |      2       |  2.26825   |
| 28   |     1.02     |     0.99     |      22      |      2       |  2.10975   |
| 29   |     1.02     |      1       |      22      |      2       |  2.89285   |
| 30   |     1.02     |     1.01     |      22      |      6       |  2.98607   |
| 31   |     1.02     |     1.02     |      22      |      2       |  4.50583   |
| 32   |     1.02     |     1.03     |      22      |      2       |  11.96628  |
| 33   |     1.02     |     1.04     |      22      |      2       |  19.0683   |
| 34   |     1.02     |     1.05     |      22      |      3       |  28.21809  |
| 35   |     1.02     |     1.06     |      22      |      2       |  28.07903  |
| 36   |     1.03     |     0.99     |      22      |      2       |  2.20329   |
| 37   |     1.03     |      1       |      22      |      2       |  2.82744   |
| 38   |     1.03     |     1.01     |      22      |      6       |  2.70815   |
| 39   |     1.03     |     1.02     |      20      |      2       |  4.51061   |
| 40   |     1.03     |     1.03     |      24      |      2       |  10.12132  |
| 41   |     1.03     |     1.04     |      24      |      2       |  16.18579  |
| 42   |     1.03     |     1.05     |      24      |      3       |  23.38828  |
| 43   |     1.03     |     1.06     |      24      |      4       |  22.97236  |
| 44   |     1.04     |     0.96     |      22      |      2       |  1.43108   |
| 45   |     1.04     |     0.98     |      24      |      2       |  2.04998   |
| 46   |     1.04     |     0.99     |      24      |      2       |  2.04891   |
| 47   |     1.04     |      1       |      26      |      2       |  2.84061   |
| 48   |     1.04     |     1.01     |      26      |      6       |  2.62916   |
| 49   |     1.04     |     1.02     |      24      |      3       |   3.6453   |
| 50   |     1.04     |     1.03     |      24      |      2       |  7.61263   |
| 51   |     1.04     |     1.04     |      24      |      2       |  11.54092  |
| 52   |     1.04     |     1.05     |      24      |      3       |  16.66219  |
| 53   |     1.04     |     1.06     |      24      |      4       |  15.96284  |
| 54   |     1.05     |     0.99     |      28      |      2       |  1.94277   |
| 55   |     1.05     |      1       |      26      |      2       |   2.6005   |
| 56   |     1.05     |     1.01     |      28      |      6       |  2.72566   |
| 57   |     1.05     |     1.02     |      26      |      3       |  3.41955   |
| 58   |     1.05     |     1.03     |      28      |      2       |   6.6383   |
| 59   |     1.05     |     1.04     |      28      |      2       |  10.11499  |
| 60   |     1.05     |     1.05     |      28      |      3       |  13.88036  |
| 61   |     1.05     |     1.06     |      28      |      4       |  13.67672  |
| 62   |     1.06     |     0.99     |      28      |      2       |  1.90809   |
| 63   |     1.06     |      1       |      28      |      2       |  2.35276   |
| 64   |     1.06     |     1.01     |      30      |      6       |  2.56095   |
| 65   |     1.06     |     1.02     |      30      |      8       |  2.58771   |
| 66   |     1.06     |     1.03     |      30      |      2       |  4.84518   |
| 67   |     1.06     |     1.04     |      30      |      2       |   7.2996   |
| 68   |     1.06     |     1.05     |      30      |      3       |  10.08465  |
| 69   |     1.06     |     1.06     |      30      |      4       |  10.10623  |
| 70   |      1       |     0.96     |      20      |      2       |   1.5026   |
| 71   |      1       |     0.98     |      16      |      2       |  2.69045   |
| 72   |      1       |     0.99     |      14      |      2       |  2.34788   |
| 73   |      1       |      1       |      14      |      2       |  2.99204   |
| 74   |      1       |     1.01     |      14      |      6       |  3.11168   |
| 75   |      1       |     1.02     |      14      |      3       |  4.78555   |
| 76   |      1       |     1.03     |      14      |      2       |  16.47194  |
| 77   |      1       |     1.04     |      14      |      2       |  26.63185  |
| 78   |      1       |     1.05     |      14      |      3       |  42.78997  |
| 79   |      1       |     1.06     |      14      |      3       |  43.02803  |