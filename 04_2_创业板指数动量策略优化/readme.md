# 关于创业板指动量策略的目前进展

[TOC]


### 1. 最初的策略：

1. 持有规则：当日收盘价> 20日均线*103%，而且当日收盘价<5日均线103%
2. 其他一切情况空仓
3. 永远不做空



### 2. 均线时间长度调整

对于持有规则中的两个均线（即20日均线与5日均线）做一定程度的上下浮动调整

考虑到**MACD**指标选择的快速移动平均值一般选12日，慢速移动平均值一般选26日

我们将慢速移动平均值范围选择[5,17]，快速移动平均值选择[18,29]

1. 计算从2015-2020的**五年期**累计收益率

![image-20200303090444096](C:\Users\zikep\AppData\Roaming\Typora\typora-user-images\image-20200303090444096.png)

可以看到收益率最高的均线时间选择为**短期选8天，长期选24天**时，累计收益率为57.8%



2. 把同样的均线时长选择2017-2020的**三年期**累计收益率，结果如下

![image-20200303090806156](C:\Users\zikep\AppData\Roaming\Typora\typora-user-images\image-20200303090806156.png)

发现最优的均线时间长度发生了变化，最优的均线时间选择为**短期均线选择5天，长期均线选择19天**

#### 结果分析

1. 对于该策略在三年期和五年期结果中都存在收益率超过指数收益率的结果
2. 但是两个时间年限的收益率结果中最优均线长度的选择**并不稳定**
3. 似乎存在一个大致的范围能够做到较高的累计收益率，即短期均线选择[5,9]，长期均线[18,24]



### 3. 机器学习方法

#### 使用一个最基础的长短期记忆网络（LSTM）模型

1. 将指数收盘价数据转换为每日**收益率**数据
2. 将收益率数据进行0-1归一化，即最小收益率设置为0，最大收益率设置为1
3. 使用前**二十个交易日**的交易日收盘数据作为当日的输入来源
4. 损失函数使用根号均方误（$\sqrt{\frac1m\sum_{i=1}^m(y_i-\hat{y_i})^2}$)  即预测收益率与实际收益率的差距(但是感觉这个指标对于衡量策略优劣不是很合适？)
5. 前2/3的数据设置为训练集，后1/3的数据设置为测试集
6. 训练集数据大致为780个，batch size选择100，epochs选择10000（结果已收敛）

#### 结果

收益率的真实值（红色）和预测值（训练集预测值为黑色，测试集预测值为绿色）

<img src="C:\Users\zikep\AppData\Roaming\Typora\typora-user-images\image-20200303094710487.png" alt="image-20200303094710487" style="zoom: 20%;" />



考虑两种买入策略：

1. **S0**：当预测收益率>0时持有
2. **S1**：当预测收益率>0.5%时持有

出现了常见的问题：在训练集中表现很好，但是测试集中甚至无法超过创业板指数收益率

训练集中的结果（橙线为创业板指，蓝线为策略S0收益率）：

<img src="C:\Users\zikep\AppData\Local\Temp\WeChat Files\d7a7e7e9390232bdca3af9b0fc06d63.png" alt="d7a7e7e9390232bdca3af9b0fc06d63" style="zoom:50%;" />

测试集中的结果（红色为创业板指数，蓝色为S0收益率，绿色为S1收益率）：

![4f8c53da34814689361791860cc2b33](C:\Users\zikep\AppData\Local\Temp\WeChat Files\4f8c53da34814689361791860cc2b33.png)

可以看到，两种策略的测试集中的收益率都没有超过创业板指数收益率

#### 可能的原因

1. 股票收益率过去的变动情况对于未来收益率的预测效果不大
2. 模型过拟合？导致过度拟合了训练集收益率但对于实际收益率波动情况缺乏预测能力

#### 下一步可能的方向

1. 扩大测试范围，是否机器学习方法在更大范围个股数据中也无超额收益率
2. 除了以前交易日的收益率，加入基本面因素作为模型的输入变量？

